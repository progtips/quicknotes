# Mobile/Web App - QuickNotes

Кроссплатформенное приложение QuickNotes для iOS, Android и Web, построенное на React Native, Expo Router и TypeScript.

## Технологии

- **React Native** - фреймворк для мобильных приложений
- **Expo Router** - файловая маршрутизация (работает на всех платформах)
- **Expo** - инструменты и сервисы для разработки
- **React Native Web** - поддержка веб-платформы
- **TypeScript** - типизация
- **@tanstack/react-query** - управление состоянием сервера и кеширование
- **Axios** - HTTP клиент для API запросов
- **AsyncStorage** - локальное хранилище

## Структура проекта

```
mobile/
├── app/                    # Expo Router файловая маршрутизация
│   ├── _layout.tsx        # Корневой layout
│   ├── index.tsx          # Точка входа (редирект)
│   ├── (auth)/            # Группа авторизации
│   │   ├── _layout.tsx
│   │   └── login.tsx      # Экран входа/регистрации
│   └── (tabs)/            # Группа с табами
│       ├── _layout.tsx    # Tab navigation
│       ├── notes.tsx      # Список заметок
│       ├── settings.tsx   # Настройки
│       └── note/          # Редактирование заметки
│           ├── _layout.tsx
│           └── [id].tsx   # Динамический роут
├── src/
│   ├── services/          # API сервисы
│   │   ├── api.ts        # Axios клиент
│   │   ├── auth.ts       # Аутентификация
│   │   └── notes.ts      # Заметки
│   ├── hooks/            # Custom React hooks
│   │   └── useAuth.ts    # Hook для аутентификации
│   └── types/            # TypeScript типы
├── app.json              # Конфигурация Expo
├── package.json
└── tsconfig.json
```

## Установка

```powershell
# Установка зависимостей
npm install

# Настройка переменных окружения
# Создайте .env файл с EXPO_PUBLIC_API_URL
```

## Переменные окружения

Создайте файл `.env`:

```env
EXPO_PUBLIC_API_URL=http://localhost:4000/api
```

Для production укажите URL вашего backend сервера.

## Запуск

```powershell
# Запуск на всех платформах (интерактивное меню)
npm start

# Запуск на конкретной платформе
npm run android      # Android эмулятор/устройство
npm run ios          # iOS симулятор (требует macOS)
npm run web          # Веб-браузер
```

## Экраны приложения

### Авторизация (`app/(auth)/login.tsx`)
- Вход в систему
- Регистрация нового пользователя
- Переключение между режимами

### Список заметок (`app/(tabs)/notes.tsx`)
- Просмотр всех заметок пользователя
- Фильтр архивных заметок
- Pull-to-refresh
- FAB для создания новой заметки
- Навигация к редактированию

### Редактирование заметки (`app/(tabs)/note/[id].tsx`)
- Создание новой заметки (`/note/new`)
- Редактирование существующей заметки (`/note/:id`)
- Архивирование заметки
- Автосохранение

### Настройки (`app/(tabs)/settings.tsx`)
- Просмотр профиля пользователя
- Выход из аккаунта

## Навигация

Приложение использует Expo Router с файловой маршрутизацией:

- **Авторизованные пользователи** → `/(tabs)/notes`
- **Неавторизованные пользователи** → `/(auth)/login`
- **Автоматическая проверка** токена при запуске

## API Интеграция

Все API запросы идут через `src/services/api.ts` с автоматическим добавлением JWT токена.

### Сервисы

- `src/services/auth.ts` - регистрация, вход, получение текущего пользователя
- `src/services/notes.ts` - CRUD операции для заметок

### React Query

Используется `@tanstack/react-query` для:
- Кеширования данных
- Автоматической синхронизации
- Управления состоянием загрузки
- Инвалидации кеша при мутациях

## Сборка

```powershell
# Сборка для Android
npm run build:android

# Сборка для iOS
npm run build:ios

# Сборка для Web
npm run build:web
```

## Разработка

### Требования

1. Backend сервер должен быть запущен и доступен
2. Указан правильный `EXPO_PUBLIC_API_URL` в `.env`
3. Для тестирования на реальных устройствах используйте Expo Go или соберите standalone приложение

### Структура маршрутов Expo Router

- `app/` - корневая директория для маршрутов
- `(auth)` - группа маршрутов для авторизации (скобки скрывают группу из URL)
- `(tabs)` - группа с табами навигации
- `[id].tsx` - динамический роут с параметром `id`

### Web поддержка

React Native Web работает из коробки с Expo Router. Просто запустите `npm run web` и приложение откроется в браузере.

## Troubleshooting

### Ошибка подключения к API

- Проверьте, что backend сервер запущен
- Убедитесь, что `EXPO_PUBLIC_API_URL` указан правильно
- Для локального тестирования используйте `http://localhost:4000/api` или IP адрес вашего компьютера

### Проблемы с навигацией

- Убедитесь, что все файлы в `app/` имеют правильные имена
- Проверьте структуру `_layout.tsx` файлов

### Ошибки TypeScript

- Запустите `npx expo install --fix` для обновления зависимостей
- Проверьте, что все типы импортированы правильно
